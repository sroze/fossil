# Fossil's access tokens

## Context

- We want Fossil to be used as much as possible without the need for extra backend services, in
  multi-tenant or privacy-sensitive environments.

## Decision

- We enable clients to directly fetch from or write to Fossil using tokens that can easily be
  generated by client applications.

- Each store will allow a list of JSON Web Keys to generate [a signed token (JWS)](https://www.rfc-editor.org/rfc/rfc7515) 
  that contains permissions to read or write from streams.

  - Fossil only stores the public keys (unless explicitly stated, for playground purposes).
  - Each JWT is store-specific and should expire, at some point.

- The payload has the following fields:

  - `store` (required) The identifier of the store.
  - `read` A list of stream matchers, to which this token grants read permissions.
  - `write` A list of stream matchers, to which this token grants read permissions.

- A stream matcher can be:
  - `*` to indicate any stream.
  - The literal value (i.e. name of the stream)
  - A URI template (https://www.rfc-editor.org/rfc/rfc6570)

